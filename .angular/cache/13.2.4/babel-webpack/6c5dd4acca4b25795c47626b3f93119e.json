{"ast":null,"code":"import { JwtHelperService } from '@auth0/angular-jwt';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nconst helper = new JwtHelperService();\nexport let UserService = /*#__PURE__*/(() => {\n  class UserService {\n    constructor(http, router) {\n      this.http = http;\n      this.router = router;\n      this.api_url = 'http://localhost:2911/api'; //'https://mealplanapi.herokuapp.com/api';\n    }\n\n    getToken() {\n      return localStorage.getItem('access_token');\n    }\n\n    readToken() {\n      const token = localStorage.getItem('access_token');\n      return helper.decodeToken(token);\n    }\n\n    isAuthenticated() {\n      const token = localStorage.getItem('access_token'); // Note: We can also use this.jwtHelper.isTokenExpired(token)\n      // to see if the token is expired\n\n      if (token) {\n        console.log('token exists');\n        console.log(this.readToken());\n        return true;\n      } else {\n        console.log('no token');\n        return false;\n      }\n    }\n\n    getFoodPosts() {\n      let api = this.api_url + \"/food-posts\";\n      console.log(api);\n      return this.http.get(api);\n    }\n\n    getFoodPostById(id) {\n      return this.http.get(this.api_url + `/single-post/${id}`);\n    }\n\n    login(user) {\n      console.log(this.api_url);\n      return this.http.post(this.api_url + \"/login\", user);\n    }\n\n    logOut() {\n      localStorage.removeItem('access_token');\n    }\n\n    getImgUrl(img) {\n      let formData = new FormData();\n      formData.append('img', img);\n      return this.http.post(this.api_url + \"/img-upload\", formData);\n    }\n\n    addFoodPost(formData) {\n      console.log('from addFoodPost ', formData);\n      return this.http.post(this.api_url + \"/add-post\", formData);\n    }\n\n    updateInPlan(food_id, in_plan) {\n      let data = {\n        in_plan: in_plan\n      };\n      return this.http.put(this.api_url + `/update-in_plan/${food_id}`, data);\n    }\n\n    getFoodInPlan() {\n      return this.http.get(this.api_url + \"/food-in-plan\");\n    }\n\n    updateMacro(macro) {\n      console.log('update', macro);\n      return this.http.put(this.api_url + \"/update-macro\", macro);\n    }\n\n    getMacro() {\n      return this.http.get(this.api_url + \"/macro\");\n    } //sign-up\n\n\n    addNewUser(signupForm) {\n      return this.http.post(this.api_url + \"/sign-up\", signupForm);\n    }\n\n    deletePost(postId) {\n      return this.http.delete(this.api_url + `/deletePost/${postId}`);\n    }\n\n  }\n\n  UserService.ɵfac = function UserService_Factory(t) {\n    return new (t || UserService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n  };\n\n  UserService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: UserService,\n    factory: UserService.ɵfac\n  });\n  return UserService;\n})();","map":null,"metadata":{},"sourceType":"module"}